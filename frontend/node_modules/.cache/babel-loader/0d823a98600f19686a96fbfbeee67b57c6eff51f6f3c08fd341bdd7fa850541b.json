{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\PC\\\\Desktop\\\\webAPI_cw\\\\frontend\\\\src\\\\components\\\\RecipeRatingAndDetails.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { useParams, Link } from 'react-router-dom';\nimport axios from 'axios';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction RecipeRatingsAndDetails() {\n  _s();\n  const {\n    id\n  } = useParams(); // This will be undefined when viewing the list\n  const [recipes, setRecipes] = useState([]);\n  const [recipeDetail, setRecipeDetail] = useState(null);\n  const [rating, setRating] = useState('');\n  const [review, setReview] = useState('');\n\n  // Fetch all recipes for the list view\n  useEffect(() => {\n    const fetchRecipes = async () => {\n      try {\n        const response = await axios.get('http://localhost:5000/api/recipes');\n        setRecipes(response.data);\n      } catch (error) {\n        console.error('Error fetching recipes:', error);\n      }\n    };\n    if (!id) {\n      fetchRecipes();\n    }\n  }, [id]);\n\n  // Fetch individual recipe details for the detail view\n  useEffect(() => {\n    const fetchRecipeDetail = async () => {\n      if (id) {\n        try {\n          const response = await axios.get(`http://localhost:5000/api/recipes/${id}`);\n          setRecipeDetail(response.data);\n        } catch (error) {\n          console.error('Error fetching recipe details:', error);\n        }\n      }\n    };\n    fetchRecipeDetail();\n  }, [id]);\n  const submitRating = async () => {\n    try {\n      await axios.post(`http://localhost:5000/api/recipes/${id}/ratings`, {\n        rating,\n        review\n      });\n      // Optionally refresh the recipe or just update local state to include new rating\n      fetchRecipeDetail(); // Re-fetch or update locally\n    } catch (error) {\n      console.error('Error submitting rating:', error);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: !id ? /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \"All Recipes\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n        children: recipes.map(recipe => /*#__PURE__*/_jsxDEV(\"li\", {\n          children: /*#__PURE__*/_jsxDEV(Link, {\n            to: `/ratings/${recipe._id}`,\n            children: recipe.name\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 65,\n            columnNumber: 33\n          }, this)\n        }, recipe._id, false, {\n          fileName: _jsxFileName,\n          lineNumber: 64,\n          columnNumber: 29\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 17\n    }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \"Recipe Details\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: recipeDetail === null || recipeDetail === void 0 ? void 0 : recipeDetail.name\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Nutritional Information:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Ratings:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 21\n      }, this), recipeDetail === null || recipeDetail === void 0 ? void 0 : recipeDetail.ratings.map((rat, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [rat.user, \": \", rat.rating, \" - \", rat.review]\n      }, index, true, {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 25\n      }, this)), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"number\",\n          value: rating,\n          onChange: e => setRating(e.target.value)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 84,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n          value: review,\n          onChange: e => setReview(e.target.value)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 85,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: submitRating,\n          children: \"Add Rating\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 86,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 17\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 58,\n    columnNumber: 9\n  }, this);\n}\n_s(RecipeRatingsAndDetails, \"osSb2M6wOmcwApeZAxKHOhWv+Ew=\", false, function () {\n  return [useParams];\n});\n_c = RecipeRatingsAndDetails;\nexport default RecipeRatingsAndDetails;\nvar _c;\n$RefreshReg$(_c, \"RecipeRatingsAndDetails\");","map":{"version":3,"names":["React","useState","useEffect","useParams","Link","axios","jsxDEV","_jsxDEV","RecipeRatingsAndDetails","_s","id","recipes","setRecipes","recipeDetail","setRecipeDetail","rating","setRating","review","setReview","fetchRecipes","response","get","data","error","console","fetchRecipeDetail","submitRating","post","children","fileName","_jsxFileName","lineNumber","columnNumber","map","recipe","to","_id","name","ratings","rat","index","user","type","value","onChange","e","target","onClick","_c","$RefreshReg$"],"sources":["C:/Users/PC/Desktop/webAPI_cw/frontend/src/components/RecipeRatingAndDetails.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { useParams, Link } from 'react-router-dom';\r\nimport axios from 'axios';\r\n\r\nfunction RecipeRatingsAndDetails() {\r\n    const { id } = useParams();  // This will be undefined when viewing the list\r\n    const [recipes, setRecipes] = useState([]);\r\n    const [recipeDetail, setRecipeDetail] = useState(null);\r\n    const [rating, setRating] = useState('');\r\n    const [review, setReview] = useState('');\r\n\r\n    // Fetch all recipes for the list view\r\n    useEffect(() => {\r\n        const fetchRecipes = async () => {\r\n            try {\r\n                const response = await axios.get('http://localhost:5000/api/recipes');\r\n                setRecipes(response.data);\r\n            } catch (error) {\r\n                console.error('Error fetching recipes:', error);\r\n            }\r\n        };\r\n\r\n        if (!id) {\r\n            fetchRecipes();\r\n        }\r\n    }, [id]);\r\n\r\n    // Fetch individual recipe details for the detail view\r\n    useEffect(() => {\r\n        const fetchRecipeDetail = async () => {\r\n            if (id) {\r\n                try {\r\n                    const response = await axios.get(`http://localhost:5000/api/recipes/${id}`);\r\n                    setRecipeDetail(response.data);\r\n                } catch (error) {\r\n                    console.error('Error fetching recipe details:', error);\r\n                }\r\n            }\r\n        };\r\n\r\n        fetchRecipeDetail();\r\n    }, [id]);\r\n\r\n    const submitRating = async () => {\r\n        try {\r\n            await axios.post(`http://localhost:5000/api/recipes/${id}/ratings`, {\r\n                rating,\r\n                review\r\n            });\r\n            // Optionally refresh the recipe or just update local state to include new rating\r\n            fetchRecipeDetail();  // Re-fetch or update locally\r\n        } catch (error) {\r\n            console.error('Error submitting rating:', error);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div>\r\n            {!id ? (\r\n                <div>\r\n                    <h1>All Recipes</h1>\r\n                    <ul>\r\n                        {recipes.map(recipe => (\r\n                            <li key={recipe._id}>\r\n                                <Link to={`/ratings/${recipe._id}`}>{recipe.name}</Link>\r\n                            </li>\r\n                        ))}\r\n                    </ul>\r\n                </div>\r\n            ) : (\r\n                <div>\r\n                    <h1>Recipe Details</h1>\r\n                    <p>{recipeDetail?.name}</p>\r\n                    {/* Display other details */}\r\n                    <p>Nutritional Information:</p>\r\n                    {/* Example: List nutritional info if recipeDetail is loaded */}\r\n                    <p>Ratings:</p>\r\n                    {recipeDetail?.ratings.map((rat, index) => (\r\n                        <div key={index}>\r\n                            {rat.user}: {rat.rating} - {rat.review}\r\n                        </div>\r\n                    ))}\r\n                    <div>\r\n                        <input type=\"number\" value={rating} onChange={e => setRating(e.target.value)} />\r\n                        <textarea value={review} onChange={e => setReview(e.target.value)} />\r\n                        <button onClick={submitRating}>Add Rating</button>\r\n                    </div>\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default RecipeRatingsAndDetails;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}